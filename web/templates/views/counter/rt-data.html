{{define "views/counter/rt-data"}}
<div id="counter-rt-data-box">
	<div class="panel panel-default">
		<div class="panel-heading">Показатели в реальном времени</div>
		<div class="panel-body">
			<div class="flot-chart" style="height: 300px">
					<div class="flot-chart-content" id="counter-rt-data" ></div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
	$(function() {

		$.plot($("#counter-rt-data"),
			[
				{ data: {{ plotRps .stat.Rps.Values }}, label: "rps" },
				{ data: {{ plotDuration .stat.Duration.Values }}, label: "duration", yaxis: 2 }
			],
			{
			  xaxis: {
					mode: "time",
					timeformat: "%H:%M:%S"
			  },
				yaxes: [
					{
						min:0,
						tickFormatter: function(v, axis) {
							return v.toFixed(axis.tickDecimals) + " rps";
						}
					},
					{
						min:0,
						position: "right",
						tickFormatter: function(v, axis) {
							return v.toFixed(axis.tickDecimals) + " s";
						}
					}
				],
		});
  });

  $(function() {
  	setTimeout(function() {
  		$.get('/counters/rt-data', function(data) {
  			$('#counter-rt-data-box').replaceWith(data)
  		})
  	}, 1000)
  })

</script>

</div>
{{end}}
